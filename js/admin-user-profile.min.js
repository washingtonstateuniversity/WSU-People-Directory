var wsuwp=wsuwp||{};wsuwp.people=wsuwp.people||{},function(e,p,o){o.people.rest_response_complete=!1,o.people.profile_id=!1,o.people.personal_bio=!1;var l=e("#display_name"),t=e("#email"),i=e("#url");e(".user-description-wrap").closest("tr").remove(),e(".wsuwp-people-bio-wrap").detach().insertAfter("h2:contains('About')"),e.ajax({url:o.people.rest_url,data:{wsu_nid:o.people.nid}}).done(function(e){0!==e.length&&o.people.populate_profile_fields(e[0]),o.people.rest_response_complete=!0}),o.people.populate_profile_fields=function(e){if(o.people.profile_id=e.id,o.people.name=e.title.rendered,o.people.email=e.email,o.people.website=e.website,o.people.personal_bio=e.content.rendered,l.find("option:selected").text()!==o.people.name){var p=l.find("option:contains('"+o.people.name+"')");p&&p.attr("selected","selected")}t.val()||t.val(o.people.email),i.val()||i.val(o.people.website)},o.people.populate_editor=function(e){!1!==o.people.rest_response_complete||!1!==o.people.personal_bio?o.people.personal_bio&&p.tinymce.activeEditor.setContent(o.people.personal_bio):setTimeout(o.people.populate_editor.bind(null,e),200)},e("#submit").on("click",function(){if(!1!==o.people.profile_id){var n={};l.val()!==o.people.name&&(n.title=l.val()),t.val()!==o.people.email&&(n.email=t.val()),i.val()!==o.people.website&&(n.website=i.val()),p.tinymce.activeEditor.getContent()!==o.people.personal_bio&&(n.content=p.tinymce.activeEditor.getContent()),e.isEmptyObject(n)||e.ajax({url:o.people.rest_url+"/"+o.people.profile_id,method:"POST",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",o.people.nonce),e.setRequestHeader("X-WSUWP-UID",o.people.uid)},data:n})}})}(jQuery,window,wsuwp);