!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=4)}({4:function(e,t,o){"use strict";var n=n||{};n.people=n.people||{},n.people.make_request=function(e){var t={method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},body:e};return fetch(window.ajaxurl,t).then(function(e){return e.json()})},n.people.repeatable_input=function(e,t){return'<span contenteditable="true" class="'+e+'" data-placeholder="Enter '+e+' here">'+t+'</span><button type="button" class="wsu-person-remove">\n\t\t\t<span class="screen-reader-text">Delete</span>\n\t\t</button>\n\t\t<input type="hidden" data-for="'+e+'" name="_wsuwp_profile_'+e+'[]" value="'+t+'" />'},n.people.photo_input=function(e,t){return'<div class="wsu-person-photo-wrapper">\n\t\t<img src="'+e+'" />\n\t\t<button type="button" class="wsu-person-remove">\n\t\t\t<span class="screen-reader-text">Delete</span>\n\t\t</button>\n\t\t<input type="hidden" name="_wsuwp_profile_photos[]" value="'+t+'" />\n\t</div>'},n.people.close_photo_collection=function(){var e=document.querySelector(".photo img"),t=document.querySelector(".wsu-person-photo-wrapper:first-of-type img");t?e.setAttribute("src",t.getAttribute("src")):(e&&e.remove(),document.querySelector(".photo").classList.add("wsu-person-add-photo"),document.querySelector(".photo figcaption").textContent="+ Add photo(s)"),document.body.classList.remove("wsu-person-photo-collection-open"),d.focus()},n.people.is_empty_object=function(e){for(var t in e)return!1;return!0},n.people.existing_photos=function(){return Array.prototype.slice.call(document.querySelectorAll("[name='_wsuwp_profile_photos[]']")).map(function(e){return parseInt(e.value)})},document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("header .degree"),t=document.querySelectorAll(".contact .title"),o="<button type='button' class='wsu-person-remove dashicons dashicons-no'><span class='screen-reader-text'>Delete</span></button>";document.querySelector(".card header").insertAdjacentHTML("beforeend","<button type='button' data-type='degree' class='wsu-person-add-repeatable-meta wsu-person-add-degree'>+ Add</button>"),t[t.length-1].insertAdjacentHTML("afterend","\n<button type='button' data-type='title' class='wsu-person-add-repeatable-meta wsu-person-add-title'>+ Add another title</button>"),e.forEach(function(e){e.insertAdjacentHTML("afterend",o)}),t.forEach(function(e,t){0!==t&&e.insertAdjacentHTML("afterend",o)})}),document.getElementById("publishing-action").addEventListener("click",function(e){if(e.target&&(e.target.matches("#load-ad-data")||e.target.matches("#confirm-ad-data"))){var t=document.querySelector("#publishing-action .spinner"),o=document.getElementById("_wsuwp_profile_ad_nid"),r=document.getElementById("confirm-ad-hash"),a=document.getElementById("load-ad-data"),s=document.getElementById("confirm-ad-data");if(e.preventDefault(),e.target.disabled=!0,""===o.value)return window.alert("Please enter a Network ID"),void(e.target.disabled=!1);t.style.visibility="visible";var d="&_ajax_nonce="+window.wsuwp_people_edit_profile.nid_nonce,i="&request_from="+window.wsuwp_people_edit_profile.request_from,l="&network_id="+o.value,c=void 0;if(e.target.matches("#load-ad-data")){var u="action=wsu_people_get_data_by_nid"+d+i+l;c=n.people.make_request(u)}if(e.target.matches("#confirm-ad-data")){var p="action=wsu_people_confirm_nid_data"+d+i+l;p+="&confirm_ad_hash="+r.value,p+="&post_id="+document.getElementById("post_ID").value,c=n.people.make_request(p)}c.then(function(d){if(e.target.disabled=!1,t.style.visibility="hidden",d.success){if(n.people.is_empty_object(d.data))window.alert("Sorry, a profile for "+o.value+" could not be found.");else if(e.target.matches("#load-ad-data")&&(d.data.id?n.people.populate_profile_from_primary_directory(d.data):(document.querySelector(".wsu-person").dataset.nid=o.value,new Map([["name",d.data.given_name+" "+d.data.surname],["title",d.data.title],["email",d.data.email],["phone",d.data.telephone_number],["office",d.data.office],["address",d.data.street_address]]).forEach(function(e,t){document.querySelector(".wsu-person ."+t).textContent=e,document.querySelector("[data-for='"+t+"']").value=e}),r.value=d.data.confirm_ad_hash),s.classList.remove("profile-hide-button"),document.querySelectorAll("#post-body > div > div > div").forEach(function(e){e.classList.add("show")})),e.target.matches("#confirm-ad-data")){var i=document.querySelector(".load-ad-container .description"),l=document.getElementById("publish");o.setAttribute("readonly",!0),i.textContent="The WSU Network ID used to populate this profile's data from "+i.dataset.location+".",a.classList.add("profile-hide-button"),s.classList.add("profile-hide-button"),l.classList.remove("profile-hide-button")}}else window.alert(d.data)})}});var r=document.querySelector(".wsu-person .card");r.addEventListener("focusout",function(e){if(e.target){if(e.target.matches("[contenteditable='true']")){var t=e.target.classList,o=[].indexOf.call(document.querySelectorAll("."+t),e.target),n=e.target.textContent;document.querySelectorAll("[data-for='"+t+"']")[o].value=n}if(e.target.matches(".title")||e.target.matches(".degree")||e.target.matches(".wsu-person-remove")){var r=e.relatedTarget;if(!r||r.matches(".wsu-person-remove"))return;if(r.matches(".title")||r.matches(".degree")){var a=[].indexOf.call(document.querySelectorAll(".wsu-person-remove"),r.nextSibling);document.querySelectorAll(".wsu-person-remove").forEach(function(e,t){t!==a&&(e.style.display="none")})}else document.querySelector(".wsu-person-remove").style.display="none"}}}),r.addEventListener("keypress",function(e){e.target&&e.target.matches("[contenteditable='true']")&&13===e.which&&e.preventDefault()}),r.addEventListener("click",function(e){if(e.target){if(e.target.matches(".wsu-person-add-repeatable-meta")){var t=e.target.dataset.type;e.target.insertAdjacentHTML("beforebegin",n.people.repeatable_input(t,""))}if(e.target.matches(".wsu-person-remove")){var o=e.target.previousElementSibling,r=o.classList[0],a=[].indexOf.call(document.querySelectorAll("."+r),o);o.remove(),document.querySelectorAll("[data-for='"+r+"']")[a].remove(),e.target.remove()}}}),r.addEventListener("focusin",function(e){e.target&&(e.target.matches(".title")||e.target.matches(".degree"))&&(e.target.nextElementSibling.style.display="inline-block")});var a=document.querySelector(".wsu-person .photo"),s=document.querySelector(".wsu-person-photo-collection"),d=void 0;document.getElementById("post-body-content").addEventListener("click",function(e){if(e.target){if(e.target.matches(".wsu-person .photo:not(.wsu-person-add-photo)")||e.target.parentNode&&e.target.parentNode.matches(".wsu-person .photo:not(.wsu-person-add-photo)")){window.scroll(0,0);var t=a.getBoundingClientRect();s.style.top=t.top+"px",s.style.left=t.left+"px",d=document.activeElement,document.body.classList.add("wsu-person-photo-collection-open"),document.querySelector(".wsu-person-add-photo").focus()}if(e.target.matches(".wsu-person-photo-collection-close")&&n.people.close_photo_collection(),e.target.matches(".wsu-person-add-photo")||e.target.parentNode&&e.target.parentNode.matches(".wsu-person-add-photo")){var o=void 0;if(o)return void o.open();(o=window.wp.media({title:"Select or Upload Your Photos",multiple:!0,library:{type:"image",uploadedTo:window.wsuwp_people_edit_profile.post_id},button:{text:"Use photo(s)"}})).on("select",function(){o.state().get("selection").models.forEach(function(e){var t=e.toJSON(),o=t.sizes.hasOwnProperty("thumbnail")?t.sizes.thumbnail.url:t.url,r=t.id;n.people.existing_photos().includes(r)||(document.querySelector("button.wsu-person-add-photo").insertAdjacentHTML("beforebegin",n.people.photo_input(o,r)),a.classList.contains("wsu-person-add-photo")&&(a.classList.remove("wsu-person-add-photo"),a.insertAdjacentHTML("afterbegin","<img src='"+o+"'>"),a.querySelector("figcaption").textContent="Manage photo collection"))})}),o.open()}e.target.matches(".wsu-person-photo-wrapper .wsu-person-remove")&&e.target.parentNode.remove()}}),document.addEventListener("keydown",function(e){if(document.body.classList.contains("wsu-person-photo-collection-open")){if(9===e.which){var t=s.querySelectorAll("button:not(.wsu-person-remove)"),o=[].indexOf.call(t,document.activeElement);e.shiftKey&&0===o?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||o!==t.length-1||(t[0].focus(),e.preventDefault())}27===e.which&&n.people.close_photo_collection()}}),jQuery(".wsu-person-photo-collection").sortable({cursor:"move",placeholder:"wsu-person-photo-wrapper placeholder",items:"> .wsu-person-photo-wrapper",start:function(e,t){t.helper.height("").width("")}})}});