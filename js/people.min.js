!function(f,c,o){var w;function t(){f(".wsu-people-lightbox").remove(),f("body").removeClass("wsu-people-lightbox-open"),f("body > a, body > div").removeAttr("aria-hidden"),w&&w.focus()}f(c).ready(function(){f(".has-photo .photo img").each(function(){f(this).attr("src",f(this).data("photo"))})}),f(".lightbox").on("click",".name a, .card figure a",function(e){e.preventDefault();var d=f(this).closest(".wsu-person"),t=d.data("profile-id");f.ajax({url:o.wsu_people_rest_url+t}).done(function(o){var e=o.email_alt?o.email_alt:o.email,t=o.phone_alt?o.phone_alt:o.phone,i=o.office_alt?o.office_alt:o.office,n=!1,a=o.position_title,s=o.content.rendered,l=d.data("photo"),r=d.data("title"),h=d.data("about"),p=_.template(f("#wsu-person-lightbox-template").html());if(l&&o.photos[l]?n=o.photos[l].thumbnail?o.photos[l].thumbnail:o.photos[l].full:o.photos[0]&&(n=o.photos[0].thumbnail?o.photos[0].thumbnail:o.photos[0].full),r&&o.working_titles.length)if(0<String(r).indexOf(",")){var u=[];f.each(r.split(","),function(e,t){o.working_titles[t]&&u.push("<div class='title'>"+o.working_titles[t]+"</div>")}),a=u.join("")}else o.working_titles[r]&&(a=o.working_titles[r]);else o.working_titles.length&&(a=o.working_titles.join("<br />"));h&&""!==o[h]&&"personal"!==h&&(s=o[h]),w=c.activeElement,f("body > a, body > div").attr("aria-hidden","true"),f("body").addClass("wsu-people-lightbox-open").append(p({name:d.find(".name").text(),photo:n,title:a,email:e,phone:t,office:i,address:o.address,website:o.website,about:s})),f("#wsu-person-name").focus()})}),f(c).keydown(function(e){if(9===e.which&&f(".wsu-people-lightbox").length){var t=f(".wsu-people-lightbox").find("a, button, [tabindex]:not([tabindex^='-'])"),o=t.index(f(":focus"));e.shiftKey&&0===o?(t[t.length-1].focus(),e.preventDefault()):event.shiftKey||o!==t.length-1||(t[0].focus(),e.preventDefault())}}),f("body").on("click",".wsu-people-lightbox-close",function(e){e.target===this&&t()}),f(c).keydown(function(e){27===e.which&&t()}),f(".wsu-people-filters .search").on("keyup","input",function(){var t=f(this).val(),e=f(this).closest(".wsu-people-wrapper").find(".wsu-person");0<t.length?e.each(function(){var e=f(this);-1===e.text().toLowerCase().indexOf(t.toLowerCase())?e.hide("fast").attr("aria-hidden","true"):e.show("fast").removeAttr("aria-hidden")}):e.show("fast")}),f(".wsu-people-filter-label").on("click",function(){var e="false"===f(this).attr("aria-expanded")?"true":"false";f(this).attr("aria-expanded",e).next("ul").slideToggle(250)}),f(".wsu-people-filter-terms").on("change","input:checkbox",function(){var e=[],t=f(this).closest(".wsu-people-wrapper").find(".wsu-person");f(".wsu-people-filter-terms input:checkbox:checked").each(function(){e.push("."+f(this).val())}),0<e.length?(t.not(e.join(",")).hide(250).attr("aria-hidden","true"),t.filter(e.join(",")).show(250).removeAttr("aria-hidden")):t.show(250).removeAttr("aria-hidden")})}(jQuery,document,window);